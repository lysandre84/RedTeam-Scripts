package main
'''
=====================================================================================================================================================
   
 /$$$$$$$                  /$$ /$$$$$$$$                                         /$$$$$$                      /$$             /$$             
| $$__  $$                | $$|__  $$__/                                        /$$__  $$                    |__/            | $$             
| $$  \ $$  /$$$$$$   /$$$$$$$   | $$  /$$$$$$   /$$$$$$  /$$$$$$/$$$$         | $$  \__/  /$$$$$$$  /$$$$$$  /$$  /$$$$$$  /$$$$$$   /$$$$$$$
| $$$$$$$/ /$$__  $$ /$$__  $$   | $$ /$$__  $$ |____  $$| $$_  $$_  $$ /$$$$$$|  $$$$$$  /$$_____/ /$$__  $$| $$ /$$__  $$|_  $$_/  /$$_____/
| $$__  $$| $$$$$$$$| $$  | $$   | $$| $$$$$$$$  /$$$$$$$| $$ \ $$ \ $$|______/ \____  $$| $$      | $$  \__/| $$| $$  \ $$  | $$   |  $$$$$$ 
| $$  \ $$| $$_____/| $$  | $$   | $$| $$_____/ /$$__  $$| $$ | $$ | $$         /$$  \ $$| $$      | $$      | $$| $$  | $$  | $$ /$$\____  $$
| $$  | $$|  $$$$$$$|  $$$$$$$   | $$|  $$$$$$$|  $$$$$$$| $$ | $$ | $$        |  $$$$$$/|  $$$$$$$| $$      | $$| $$$$$$$/  |  $$$$//$$$$$$$/ 
|__/  |__/ \_______/ \_______/   |__/ \_______/ \_______/|__/ |__/ |__/         \______/  \_______/|__/      |__/| $$____/    \___/ |_______/ 
                                                                                                                 | $$                         
                                                                                                                 | $$                         
                                                                                                                 |__/                         
=====================================================================================================================================================
=====================================================================================================================================================
Script     : lateral_move.go
Auteur     : Lysius
Date       : XX/XX/XXXX
Description: Lit un fichier contenant une liste d’hôtes et simule une « tentative de connexion » à chacun (dans un contexte de mouvement latéral). 
=====================================================================================================================================================
'''
import (
    "bufio"
    "flag"
    "fmt"
    "os"
)

func main() {
    hostsFile := flag.String("hosts", "", "Fichier listant les hôtes")
    flag.Parse()
    if *hostsFile == "" {
        fmt.Println("Usage: --hosts hosts.txt")
        return
    }
    file, err := os.Open(*hostsFile)
    if err != nil {
        fmt.Println("Erreur:", err)
        return
    }
    defer file.Close()
    scanner := bufio.NewScanner(file)
    for scanner.Scan() {
        host := scanner.Text()
        fmt.Printf("Tentative de connexion à %s...
", host)
        // code fictif de mouvement latéral
    }
}
